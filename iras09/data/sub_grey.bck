global ds9
set vv 6.1.1
# this is a check for to ensure a match between the
# current ds9 version matches the prefs version
switch -- [string compare $vv [lindex $ds9(version) 0]] {
  -1 {
    if {[tk_messageBox -type yesno -icon question -message [msgcat::mc {DS9 has detected an older backup file, do you wish to continue?}]] == {no}} {
      return
    }
  }
  0 {}
  1 {
    tk_messageBox -type ok -icon warning -message [msgcat::mc {DS9 has detected a newer version of a backup file and therefore will not process this file.}]
    return
  }
}
proc BackupFindFile {varname} {
  upvar $varname var

  set id [string first "\[" $var(file,name)]
  if {$id > 0} {
    set fn [string range $var(file,name) 0 [expr $id-1]]
    set ext [string range $var(file,name) $id end]
  } else {
    set fn $var(file,name)
    set ext {}
  }

  if {![file exists $fn]} {
    Error "[msgcat::mc {Unable to load}] $fn"
    global fitsfbox
    set fn [OpenFileDialog fitsfbox]
    if {$fn == {}} {
      Error [msgcat::mc {An error has occurred during restore}]
      return 0
    }
    if {![file exists $fn]} {
      Error [msgcat::mc {An error has occurred during restore}]
      return 0
    }
    set var(file,name) "$fn$ext"
  }

  return 1
}
panner image compass 1
panner wcs compass 1
colorbar configure -size 10
colorbar configure -numerics 1
colorbar configure -space 1
colorbar configure -orientation 0
colorbar configure -font times
colorbar configure -fontstyle normal
colorbar configure -fontsize 24
colorbar colorbar 1 0.5 1 0
colorbarrgb configure -size 10
colorbarrgb configure -numerics 1
colorbarrgb configure -space 1
colorbarrgb configure -orientation 0
colorbarrgb configure -font times
colorbarrgb configure -fontstyle normal
colorbarrgb configure -fontsize 24
colorbarrgb colorbar rgb 0.5 0.5 0.5 1 1 1 0
CreateNameNumberFrame Frame1 base
global loadParam
array set loadParam [list load,layer {} file,mode {} file,name /home/cavagnolo/research/iras09/data/sub_norm.fits load,type mmapincr file,type fits]
if [BackupFindFile loadParam] {
  ProcessLoad
}
Frame1 magnifier graphics 1
Frame1 magnifier cursor 1
Frame1 magnifier zoom 4
Frame1 panner wcs wcs fk5
set sav [colorbar get colorbar]
colorbar colorbar 1 0.5 1 0
Frame1 colormap [colorbar get colormap]
colorbar colorbar $sav
Frame1 bg color black
Frame1 nan color red
Frame1 rgb channel red
Frame1 rgb view 1 1 1
Frame1 rgb system image
Frame1 3d view 0 0
Frame1 3d method mip
Frame1 3d threshold 50
Frame1 bin factor to  1 1 
Frame1 bin depth 1
Frame1 bin filter {""}
Frame1 bin buffer size 1024
Frame1 bin about  0 0 
Frame1 bin function sum
Frame1 colorscale linear
Frame1 colorscale log 1000
Frame1 datasec 1
Frame1 clip user  -0.1 0.1 
Frame1 clip mode user
Frame1 clip scope local
Frame1 clip minmax mode auto
Frame1 clip minmax sample 25
Frame1 clip zscale contrast 0.25
Frame1 clip zscale sample 600
Frame1 clip zscale line 120
Frame1 clip preserve 0
Frame1 pan preserve 0
Frame1 pan to physical  3988.9719 3840.785 
Frame1 zoom to  10.699321 10.699321 
Frame1 rotate 0
Frame1 orient none
Frame1 wcs align 0 wcs fk5
Frame1 marker load ds9 {"./sub_grey.bck.dir/Frame1/ds9.reg"}
Frame1 marker centroid option 5 10
Frame1 mask color red
Frame1 mask mark 1
Frame1 mask transparency 0
Frame1 smooth gaussian 2
global pds9
array set pds9 { dialog motif samp 1 automarker 1 font,style normal language locale nan red backup 0 confirm 1 font helvetica language,dir {} xpa 1 bg black language,name English tcl 0 font,size 10 }
global current
array set current { colorbar colorbar orient none zoom { 10.699321 10.699321 } mode pointer ext {} display single cursor {} rotate 0 rgb red frame Frame1 }
global pcurrent
array set pcurrent { orient none zoom { 1 1 } mode pointer display single rotate 0 }
global view
array set view { info,wcss 0 info,wcsc 0 info,wcst 0 info,wcsd 0 graph,horz 0 info,wcsu 0 info,wcse 0 magnifier 0 info,lowhigh 0 info,frame 1 info,image 1 info,wcsv 0 info,wcsf 0 info,wcsw 0 info,wcsg 0 info 0 colorbar 1 info,physical 1 info,wcsx 0 info,wcsh 0 info,wcs 1 colorbar,numerics 1 info,wcsy 0 info,wcsi 0 info,wcsz 0 info,wcsj 0 buttons 0 info,object 1 info,wcsk 0 info,amplifier 0 info,wcsl 0 info,filename 1 info,detector 0 info,wcsm 0 info,minmax 0 info,wcsn 0 info,wcso 0 panner 0 info,wcsp 0 info,wcsq 0 info,wcsa 0 layout horizontal info,wcsr 0 info,wcsb 0 graph,vert 0 }
global pview
array set pview { info,wcss 0 info,wcsc 0 info,wcst 0 info,wcsd 0 graph,horz 0 info,wcsu 0 info,wcse 0 magnifier 1 info,lowhigh 0 info,wcsf 0 info,frame 1 info,image 1 info,wcsv 0 colorbar 1 info 1 info,wcsg 0 info,wcsw 0 info,wcs 1 info,wcsh 0 info,wcsx 0 info,physical 1 colorbar,numerics 1 info,wcsi 0 info,wcsy 0 info,object 1 buttons 1 info,wcsj 0 info,wcsz 0 info,wcsk 0 info,filename 1 info,wcsl 0 info,amplifier 0 info,minmax 0 info,wcsm 0 info,detector 0 info,wcsn 0 panner 1 info,wcso 0 info,wcsp 0 layout horizontal info,wcsa 0 info,wcsq 0 graph,vert 0 info,wcsb 0 info,wcsr 0 }
global canvas
array set canvas { gap 4 width 600 gap,bottom 0 height 600 font *helvetica-medium-r-*-100-* }
global phttp
array set phttp { auth,passwd {} proxy,host {} auth,user {} auth 0 proxy 0 proxy,port {} }
global pbuttons
array set pbuttons { color,he 1 view,lowhigh 0 frame,single 1 major,color 1 view,wcs 0 bin,in 1 view,buttons 1 help,release 1 file,open 1 edit,crosshair 1 view,panner 1 help,new 0 view,amplifier 0 scale,params 0 region,dissolve 0 major,zoom 1 frame,newrgb 1 major,file 1 bin,512x 0 file,console 0 bin,8192x 0 edit,prefs 0 bin,2048x 0 zoom,i2 1 edit,colorbar 1 zoom,i4 1 scale,minmax 1 view,horizontal 0 color,numerics 0 major,wcs 1 zoom,i8 1 view,colorbar 1 frame,matchbin 0 color,sls 0 frame,clear 1 bin,1 1 bin,2 1 zoom,16 0 edit,rotate 1 file,page 1 bin,4 1 zoom,none 0 region,list 1 file,pspage 0 bin,8 1 scale,zscale 1 region,centroid 0 region,autocentroid 0 frame,size 0 zoom,270 0 scale,pow 1 scale,90 0 help,issue 0 wcs,fk4 1 zoom,32 0 wcs,fk5 1 frame,blink 1 bin,average 0 bin,128x 0 color,cool 1 view,image 0 frame,reset 0 scale,95 0 color,staircase 0 scale,96 0 scale,97 0 major,scale 1 scale,98 0 region,showtext 0 file,exit 1 scale,99 0 frame,first 1 help,ref 1 color,grey 1 view,filename 0 view,magnifier 1 region,vector 1 color,green 0 color,vert 0 file,header 1 edit,cut 0 region,all 1 file,savefits 0 scale,user 0 file,samp,image 0 file,saveimage 1 color,params 0 zoom,in 1 frame,movelast 0 edit,pointer 1 region,deleteall 0 color,standard 0 help,faq 0 region,load 1 region,savetemplate 0 scale,925 0 region,loadtemplate 0 zoom,params 0 color,rainbow 1 frame,refresh 0 zoom,i16 0 zoom,90 0 region,delete 1 edit,copy 0 file,xpa 0 region,annulus 1 bin,fit 1 region,circle 1 region,ruler 1 view,physical 0 color,a 1 color,b 1 scale,sqrt 1 frame,matchframe 0 zoom,i32 0 major,view 1 view,vertical 0 region,point 0 region,group 0 frame,movenext 0 bin,128 0 file,print 1 frame,delete 1 frame,movefirst 0 color,red 0 region,none 1 region,polygon 1 bin,params 0 frame,last 1 scale,zmax 0 edit,catalog 1 frame,tile 1 major,help 1 region,compass 0 edit,paste 0 file,samp,table 0 scale,squared 1 scale,datasec 0 region,back 1 help,desk 1 frame,cube 0 region,ellipse 1 view,graphvert 1 edit,none 1 major,edit 1 color,blue 0 file,psprint 0 wcs,ecliptic 1 color,horz 0 region,save 1 region,newgroup 0 color,aips0 1 wcs,galactic 1 zoom,0 0 region,front 1 zoom,1 1 frame,matchcolor 0 frame,moveprev 0 zoom,2 1 scale,995 0 scale,hist 1 zoom,4 1 color,reset 0 file,about 1 color,numspace 0 region,show 0 view,minmax 0 view,detector 0 frame,new 1 zoom,8 1 zoom,center 0 zoom,fit 1 region,ellipseannulus 1 major,bin 1 frame,next 1 edit,pan 1 view,info 1 bin,1024x 0 bin,out 1 view,object 0 color,invert 0 region,info 1 region,create 0 file,tcl 0 color,bb 1 wcs,sexagesimal 1 region,panda 1 region,boxannulus 0 wcs,degrees 1 region,box 1 wcs,icrs 1 view,frame 0 bin,16 1 major,frame 1 color,color 0 help,ack 1 frame,prev 1 color,i8 1 color,heat 1 edit,zoom 1 region,invert 0 edit,examine 1 bin,32 1 frame,deleteall 0 region,text 1 region,projection 0 help,keyboard 1 scale,log 1 bin,4096x 0 file,savempeg 0 frame,matchscale 0 zoom,align 0 help,home 1 scale,linear 1 edit,undo 0 major,region 1 zoom,x 0 frame,rgb 0 bin,256 0 zoom,y 0 zoom,xy 0 zoom,180 0 view,graphhorz 1 color,hsv 0 color,numvalue 0 region,line 1 zoom,out 1 region,epanda 1 bin,sum 0 bin,256x 0 help,user 1 file,samp 1 region,bpanda 0 bin,64 1 }
global ppanner
array set ppanner { compass,wcs,system wcs compass,image 1 compass,wcs,sky fk5 compass,wcs 1 }
global pmagnifier
array set pmagnifier { region 1 zoom 4 cursor 1 }
global colorbar
array set colorbar { font,style normal orientation horizontal space 1 invert 0 font,size 24 numerics 1 map Grey font times size 10 }
global saveimage
array set saveimage { format jpeg mpeg,quality 2 tiff,compression none jpeg,quality 75 base ds9 }
global prefs
array set prefs { version 6.1.1 }
global debug
array set debug { tcl,samp 0 tcl,ftp 0 tcl,marker 0 saotk,perf 0 tcl,idletasks 0 tcl,info 0 tcl,events 0 tcl,grid 0 saotk,ast 0 saotk,bin 0 tcl,cat 0 saotk,rgb 0 saotk,compress 0 saotk,mosaic 0 tcl,image 0 tcl,update 0 saotk,wcs 0 saotk,parser 0 iis 0 tcl,layout 0 tcl,hv 0 tcl,watch 0 saotk,gz 0 tcl,http 0 }
global ps
array set ps { scale scaled orient portrait height 11 ok 1 size letter resolution 300 dest file level 2 width 8.5 filename ds9.ps color2 color cmd lp color rgb }
global pps
array set pps { scale scaled orient portrait height 11 size letter resolution 150 dest printer level 2 width 8.5 filename ds9.ps color2 color cmd lp color rgb }
global rgb
array set rgb { blue 1 lock,slice 0 lock,colorbar 0 lock,scale 0 system wcs green 1 lock,bin 0 lock,smooth 0 red 1 }
global threed
array set threed { threshold,tick 25 threshold,min 0 threshold,scale {} threshold 50 method aip el 0 threshold,res 1 threshold,max 100 az 0 }
global blink
array set blink { interval 500 }
global pblink
array set pblink { interval 500 }
global tile
array set tile { grid,col 10 mode grid grid,gap 4 grid,row 10 grid,mode automatic }
global ptile
array set ptile { grid,col 10 mode grid grid,row 10 grid,gap 4 grid,mode automatic }
global crosshair
array set crosshair { lock none }
global bin
array set bin { buffersize 1024 depth 1 function sum top .bl mb .blmb factor { 1 1 } }
global pbin
array set pbin { depth 1 buffersize 1024 function sum mb .blmb top .bl factor { 1 1 } }
global panzoom
array set panzoom { wheel,factor 1.2 skyformat sexagesimal preserve 0 mode click wheel 1 system image sky fk5 }
global ppanzoom
array set ppanzoom { wheel,factor 1.2 preserve 0 wheel 1 mode click }
global scale
array set scale { type linear scope local mb .scalemb log 1000 top .scale min -0.1 preserve 0 xaxis full mode user datasec 1 max 0.1 yaxis log }
global pscale
array set pscale { preserve 0 datasec 1 mode minmax scope local log 1000 type linear mb .scalemb top .scale }
global minmax
array set minmax { mode auto sample 25 }
global pminmax
array set pminmax { mode auto sample 25 }
global zscale
array set zscale { line 120 sample 600 contrast .25 }
global pzscale
array set pzscale { line 120 contrast .25 sample 600 }
global marker
array set marker { panda,ang2 360 shape circle show 1 bpanda,ang1 0 dialog,dist,system physical bpanda,ang2 360 boxannulus,annuli 1 delete 1 annulus,inner 15 panda,angnum 4 autocentroid 0 show,text 1 epanda,angnum 4 font,size 10 rotate 1 move 1 fixed 0 paste,sky fk5 skyformat degrees ellipseannulus,radius1 40 ellipseannulus,radius2 20 ellipseannulus,radius3 60 wcs 0 epanda,radius1 40 panda,outer 30 panda,annuli 1 epanda,radius2 20 epanda,radius3 60 source 1 dialog,system physical strip 0 bpanda,radius1 80 epanda,annuli 1 dialog,skyformat degrees bpanda,radius2 40 bpanda,radius3 120 color green sky fk5 annulus,outer 30 format ds9 polygon,width 20 font,style normal edit 1 font helvetica bpanda,angnum 4 dash 0 dialog,sky fk5 boxannulus,radius1 80 projection,thick 0 dashlist {8 3} boxannulus,radius2 40 polygon,height 20 system wcs box,radius1 80 boxannulus,radius3 120 box,radius2 40 annulus,annuli 1 point,size 11 compass,radius 40 copy {} epanda,ang1 0 include 1 epanda,ang2 360 dialog,dist,format degrees circle,radius 20 paste,system wcs width 1 load current bpanda,annuli 1 ellipse,radius1 40 ellipse,radius2 20 panda,inner 15 preserve 0 maxdialog 48 ellipseannulus,annuli 1 panda,ang1 0 }
global pmarker
array set pmarker { panda,ang2 360 bpanda,ang1 0 shape circle show 1 dialog,dist,system physical bpanda,ang2 360 boxannulus,annuli 1 delete 1 annulus,inner 15 panda,angnum 4 autocentroid 0 show,text 1 epanda,angnum 4 font,size 10 move 1 rotate 1 fixed 0 ellipseannulus,radius1 40 ellipseannulus,radius2 20 ellipseannulus,radius3 60 wcs 0 epanda,radius1 40 panda,outer 30 panda,annuli 1 epanda,radius2 20 epanda,radius3 60 source 1 dialog,system physical bpanda,radius1 80 bpanda,radius2 40 dialog,skyformat degrees epanda,annuli 1 bpanda,radius3 120 sky fk5 color green format ds9 annulus,outer 30 polygon,width 20 font,style normal edit 1 font helvetica bpanda,angnum 4 dash 0 dialog,sky fk5 projection,thick 0 boxannulus,radius1 80 dashlist {8 3} polygon,height 20 boxannulus,radius2 40 boxannulus,radius3 120 box,radius1 80 box,radius2 40 point,size 11 annulus,annuli 1 compass,radius 40 include 1 epanda,ang1 0 dialog,dist,format degrees epanda,ang2 360 circle,radius 20 width 1 bpanda,annuli 1 ellipse,radius1 40 preserve 0 panda,inner 15 ellipse,radius2 20 panda,ang1 0 ellipseannulus,annuli 1 }
global centroid
array set centroid { radius 10 iteration 5 }
global wcs
array set wcs { align,system wcs skyformat sexagesimal system wcs align,sky fk5 align 0 sky fk5 }
global pwcs
array set pwcs { skyformat sexagesimal align,system wcs system wcs align,sky fk5 sky fk5 align 0 }
global pgraph
array set pgraph { horz,log false horz,grid 1 vert,log false vert,grid 1 }
global pcoord
array set pcoord { skyformat sexagesimal wcss 0 wcsc 0 wcst 0 wcsd 0 wcsu 0 wcse 0 wcsv 0 image 1 wcsf 0 wcsw 0 wcsg 0 wcsx 0 wcsh 0 physical 0 wcs 1 wcsy 0 wcsi 0 wcsz 0 wcsj 0 wcsk 0 wcsl 0 amplifier 0 wcsm 0 detector 0 wcsn 0 wcso 0 wcsp 0 value 1 wcsq 0 wcsa 0 sky fk5 wcsr 0 wcsb 0 }
global pexamine
array set pexamine { zoom 4 mode new }
global pixel
array set pixel { maxsize 9 size 5 copy {} }
global mask
array set mask { transparency 0 view 1 mark 1 color red }
global pmask
array set pmask { transparency 0 view 1 color red mark 1 }
global contour
array set contour { numlevel 5 scale linear init,scale 0 method smooth view 0 copy {} mb .ctmb dash 0 width 1 smooth 4 color,msg Green log 1000 init,limits 0 top .ct levels 5 min -0.1 mode user init,mode 0 max 0.1 color green }
global pcontour
array set pcontour { numlevel 5 scale linear method smooth copy {} view 0 mb .ctmb width 1 dash 0 smooth 4 levels 5 top .ct min {} mode minmax max {} color green }
global grid
array set grid { grid,color blue grid,style 0 view 0 numlab,type interior border 1 tick,width 1 numlab,color green title,text {} axes,color red numlab,style bold axes,style 0 textlab,color black numlab 1 skyformat sexagesimal textlab,style bold textlab,gap1 {} border,color blue edge,1 bottom textlab,gap2 {} edge,2 left textlab,size 10 grid,gapunit1 degrees border,style 0 grid,gapunit2 degrees title,gap {} textlab,font helvetica grid,width 1 format1 {} title 1 format2 {} sky fk5 textlab 1 axes,width 1 title,color black title,style bold border,width 1 system wcs numlab,vertical 0 tick,color white tick,style 0 textlab,def1 1 textlab,def2 1 axes 1 type analysis grid,gap1 {} tick 1 grid,gap2 {} numlab,gap1 {} numlab,gap2 {} grid 1 numlab,size 10 axes,type interior title,size 12 numlab,font helvetica title,def 1 title,font helvetica textlab,text1 {} textlab,text2 {} }
global smooth
array set smooth { radius 2 function gaussian top .sm mb .smmb view 1 }
global psmooth
array set psmooth { radius 3 function gaussian mb .smmb top .sm view 0 }
global nres
array set nres { skyformat degrees system wcs server simbad-cds sky fk5 }
global pnres
array set pnres { server simbad-cds }
global sao
array set sao { valid 0 width 15 skyformat sexagesimal mode new height 15 system wcs survey dss save 0 rformat arcmin sky fk5 }
global eso
array set eso { valid 0 width 15 skyformat sexagesimal mode new height 15 system wcs survey DSS1 save 0 rformat arcmin sky fk5 }
global stsci
array set stsci { valid 0 width 15 skyformat sexagesimal mode new height 15 system wcs survey all save 0 rformat arcmin sky fk5 }
global twomass
array set twomass { valid 0 width 15 skyformat sexagesimal mode new height 15 system wcs survey j save 0 rformat arcmin sky fk5 }
global first
array set first { valid 1 width 15 skyformat sexagesimal mode new height 15 system wcs survey first save 0 rformat arcmin sky fk5 }
global nvss
array set nvss { valid 1 width 15 skyformat sexagesimal mode new height 15 system wcs survey nvss save 0 rformat arcmin sky fk5 }
global skyview
array set skyview { valid 0 width 300 skyformat sexagesimal mode new height 300 system wcs survey sdssi save 0 rformat arcsec sky fk5 }
global cat
array set cat { id 0 sym,color,msg Green }
global pcat
array set pcat { sym,units physical sym,color green vot 1 sym,shape {circle point} loc 500 server sao }
global pvo
array set pvo { method xpa hv 1 delay 15 server http://cxc.harvard.edu/chandraed/list.txt }
global pap
array set pap { step,dash no step,width 1 titleFont helvetica quadratic,color black numlabSize 10 error 1 linear 1 textlabStyle normal numlabFont helvetica error,width 1 quadratic 0 grid 1 discrete,color red textlabSize 10 linear,width 1 step,color black numlabStyle normal quadratic,dash no quadratic,width 1 textlabFont helvetica titleStyle normal discrete 0 grid,log linearlinear step 0 titleSize 12 error,color red discrete,symbol circle linear,color black error,style 1 linear,dash no }
global panalysis
array set panalysis { user2 /usr/local/ciao/config/ciao.ds9 user3 {} log 0 user4 {} user /usr/local/bin/funtools.ds9 }
